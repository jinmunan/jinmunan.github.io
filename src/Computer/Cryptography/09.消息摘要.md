---
icon: page
order: 9
---
# 消息摘要

- 消息摘要（Message Digest）又称为数字摘要 (Digital Digest)
- ` 它是一个唯一对应一个消息或文本的固定长度的值，它由一个单向 Hash 加密函数对消息进行作用而产生 `
- 使用数字摘要生成的值是不可以篡改的，为了保证文件或者值的安全

## 特点

无论输入的消息有多长，计算出来的消息摘要的长度总是固定的。例如应用 MD5 算法摘要的消息有 128 个比特位，用 SHA-1 算法摘要的消息最终有 160 比特位的输出

只要输入的消息不同，对其进行摘要以后产生的摘要消息也必不相同；但相同的输入必会产生相同的输出

消息摘要是单向、不可逆的

常见算法 : `MD5、SHA1、SHA256、SHA512`

[在线获取消息摘要网站](http://tool.oschina.net/encrypt?type=2)

百度搜索 `tomcat` ，进入官网下载，会经常发现有 `sha1`，`sha512` , 这些都是数字摘要

## 消息摘要代码

```java
public class Digest {
    public static void main(String[] args) throws Exception {
        // 原文
        String value = "aa";
        // 算法
        String algorithm = "MD5";
        System.out.println("MD5->:" + getDigest(value, algorithm));
        System.out.println("SHA-1->:" + getDigest("11.zip", "SHA-1"));
        System.out.println("SHA-256->:" + getDigest(value, "SHA-256"));
        System.out.println("SHA-512->:" + getDigest("11.zip", "SHA-512"));
    }

    /**
     * 获取数字摘要对象
     *
     * @param value
     * @param algorithm
     * @return
     * @throws NoSuchAlgorithmException
     */
    private static String getDigest(String value, String algorithm) throws NoSuchAlgorithmException {
        // 创建消息摘要对象
        MessageDigest instance = MessageDigest.getInstance(algorithm);
        // 执行消息摘要算法
        byte[] digest = instance.digest(value.getBytes());
        return encode2Hex(digest);
    }

    /**
     * 编码
     *
     * @param digest
     * @return
     */
    private static String encode2Hex(byte[] digest) {
        StringBuffer sb = new StringBuffer();
        for (byte b : digest) {
            // 把密文转换成 16 进制，做了一次与运算，结果相当与省略 24 个 0,int 是 4 个字节，byte 是 1 个字节
            String strings = Integer.toHexString(b & 0xff);
            if (strings.length() == 1) {
                strings = "0" + strings;
            }
            sb.append(strings);
        }
        return sb.toString();
    }
}

// MD5->:4124bc0a9335c27f086f24ba207a4912
// SHA-1->:69854776309ae489c5725a1303b14d05f6921381
// SHA-256->:961b6dd3ede3cb8ecbaacbd68de040cd78eb2ed5889130cceb4c49268ea4d506
// SHA-512->:cfd3b45d195b6e6b4034ab6834625768a78d2960661d7fca40b87565b957b490643e221cf9ca69b228707abe35b85d18ede9ab99a61fb63193918fd67d1660dc
```

总结

- MD5 算法 : 摘要结果 16 个字节，转 16 进制后 32 个字节
- SHA1 算法 : 摘要结果 20 个字节，转 16 进制后 40 个字节
- SHA256 算法 : 摘要结果 32 个字节，转 16 进制后 64 个字节
- SHA512 算法 : 摘要结果 64 个字节，转 16 进制后 128 个字节
