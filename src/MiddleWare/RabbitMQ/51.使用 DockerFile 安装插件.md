---
icon: page
order: 12
---
# 使用 DockerFile 安装插件
## 实现流程

```sh
# 首先将下载的插件上传到我们的服务器，然后创建DockerFile文件
[root@jinmunan plugins]# touch DockerFile
[root@jinmunan plugins]# ls
DockerFile  rabbitmq_delayed_message_exchange-3.11.1.ez

# 编写DockerFile
vim DockerFile

# 然后进行打包构建镜像
docker build -f DockerFile -t my-rabbitmq .

# 运行
docker run -d --name mq -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=123456 -p 15672:15672 -p 5672:5672 my-rabbitmq1
```

## DockerFile

```dockerfile
FROM rabbitmq:3-management
COPY ["rabbitmq_delayed_message_exchange-3.11.1.ez" , "/plugins/"]
COPY ["/opt/rabbitmq.config" , "/opt/rabbitmq/etc/rabbitmq/"]
RUN rabbitmq-plugins enable rabbitmq_delayed_message_exchange
RUN apt-get update && \
    apt-get install -y yum && \
    yum -y update && \
    yum -y install <your-package-name> && \
    yum clean all && \
    rm -rf /var/cache/yum
```

## Docker 拷贝文件到容器

从容器拷贝到宿主机

`docker cp mq:/opt/rabbitmq/etc/rabbitmq/ /opt/rabbitmq.config`

从宿主机拷贝到容器

`docker cp /opt/rabbitmq.config mq:/opt/rabbitmq/etc/rabbitmq/ `

