---
icon: page
order: 6
---
# åŒ…ç®¡ç†å·¥å…·

![image-20230418215707920](./assets/image-20230418215707920.png)

## æ¦‚å¿µä»‹ç»

### åŒ…æ˜¯ä»€ä¹ˆ

ã€åŒ…ã€è‹±æ–‡å•è¯æ˜¯ `package` ï¼Œä»£è¡¨äº†ä¸€ç»„ç‰¹å®šåŠŸèƒ½çš„æºç é›†åˆ

### åŒ…ç®¡ç†å·¥å…·

ç®¡ç†ã€åŒ…ã€çš„åº”ç”¨è½¯ä»¶ï¼Œå¯ä»¥å¯¹ã€ŒåŒ…ã€è¿›è¡Œ `ä¸‹è½½å®‰è£…` ï¼Œ `æ›´æ–°` ï¼Œ `åˆ é™¤` ï¼Œ `ä¸Šä¼ ` ç­‰æ“ä½œ

å€ŸåŠ©åŒ…ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘é¡¹ç›®ï¼Œæå‡å¼€å‘æ•ˆç‡

åŒ…ç®¡ç†å·¥å…·æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰åŒ…ç®¡ç†å·¥å…·ï¼Œæ‰€ä»¥ `æŒæ¡å¥½åŒ…ç®¡ç†å·¥å…·éå¸¸é‡è¦`

### å¸¸ç”¨çš„åŒ…ç®¡ç†å·¥å…·

ä¸‹é¢åˆ—ä¸¾äº†å‰ç«¯å¸¸ç”¨çš„åŒ…ç®¡ç†å·¥å…·

- npm
- yarn
- cnpm

## npm

npm å…¨ç§° `Node Package Manager` ï¼Œç¿»è¯‘ä¸ºä¸­æ–‡æ„æ€æ˜¯ã€Node çš„åŒ…ç®¡ç†å·¥å…·ã€

npm æ˜¯ node.js å®˜æ–¹å†…ç½®çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæ˜¯ `å¿…é¡»è¦æŒæ¡ä½çš„å·¥å…·`

### npm çš„å®‰è£…

node.js åœ¨å®‰è£…æ—¶ä¼š `è‡ªåŠ¨å®‰è£… npm` ï¼Œæ‰€ä»¥å¦‚æœä½ å·²ç»å®‰è£…äº† `node.js`ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `npm`

å¯ä»¥é€šè¿‡ `npm -v` æŸ¥çœ‹ç‰ˆæœ¬å·æµ‹è¯•ï¼Œå¦‚æœæ˜¾ç¤ºç‰ˆæœ¬å·è¯´æ˜å®‰è£…æˆåŠŸï¼Œåä¹‹å®‰è£…å¤±è´¥

![image-20230418215713535](./assets/image-20230418215713535.png)

> æŸ¥çœ‹ç‰ˆæœ¬æ—¶å¯èƒ½ä¸ä¸Šå›¾ç‰ˆæœ¬å·ä¸ä¸€æ ·ï¼Œä¸è¿‡ä¸å½±å“æ­£å¸¸ä½¿ç”¨

### npm åŸºæœ¬ä½¿ç”¨

#### åˆå§‹åŒ–

åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼Œç„¶åä»¥æ­¤ç›®å½•ä½œä¸ºå·¥ä½œç›®å½• `å¯åŠ¨å‘½ä»¤è¡Œå·¥å…·` ï¼Œæ‰§è¡Œ `npm init`

![image-20230418215718330](./assets/image-20230418215718330.png)

`npm init` å‘½ä»¤çš„ä½œç”¨æ˜¯å°†æ–‡ä»¶å¤¹åˆå§‹åŒ–ä¸ºä¸€ä¸ªã€åŒ…ã€ï¼Œäº¤äº’å¼åˆ›å»º `package.json æ–‡ä»¶`

`package.json` æ˜¯åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ªåŒ…éƒ½å¿…é¡»è¦æœ‰ `package.json`

`package.json` å†…å®¹ç¤ºä¾‹ï¼š

```json
{
    "name": "01_npm",
    "version": "1.0.0",
    "description": "",
    "main": "index.js",
    "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1"
    },
    "author": "",
    "license": "ISC"
}
```

å±æ€§ç¿»è¯‘

```json
{
    "name": "1-npm", // åŒ…çš„åå­—
    "version": "1.0.0", // åŒ…çš„ç‰ˆæœ¬
    "description": "", // åŒ…çš„æè¿°
    "main": "index.js", // åŒ…çš„å…¥å£æ–‡ä»¶
    "scripts": { // è„šæœ¬é…ç½®
        "test": "echo \"Error: no test specified\" && exit 1"
    },
    "author": "", // ä½œè€…
    "license": "ISC" // å¼€æºè¯ä¹¦
}
```

> åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­è¿˜æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š
>
> 1. `package name ( åŒ…å )` ä¸èƒ½ä½¿ç”¨ä¸­æ–‡ã€å¤§å†™ï¼Œé»˜è®¤å€¼æ˜¯ `æ–‡ä»¶å¤¹çš„åç§°` ï¼Œæ‰€ä»¥æ–‡ä»¶å¤¹åç§°ä¹Ÿä¸èƒ½ä½¿ç”¨ä¸­æ–‡å’Œå¤§å†™
> 2. version ( ç‰ˆæœ¬å· ) è¦æ±‚ `x.x.x` çš„å½¢å¼å®šä¹‰ï¼Œ `x` å¿…é¡»æ˜¯æ•°å­—ï¼Œé»˜è®¤å€¼æ˜¯ `1.0.0`
> 3. `ISC` è¯ä¹¦ä¸ `MIT` è¯ä¹¦åŠŸèƒ½ä¸Šæ˜¯ç›¸åŒçš„ï¼Œå…³äºå¼€æºè¯ä¹¦æ‰©å±•é˜…è¯» [http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html](http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html)
> 4. `package.json` å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸ä¿®æ”¹
> 5. ä½¿ç”¨ `npm init -y` æˆ–è€… `npm init --yes` æé€Ÿåˆ›å»º `package.json`

#### æœç´¢åŒ…

æœç´¢åŒ…çš„æ–¹å¼æœ‰ä¸¤ç§

1. å‘½ä»¤è¡Œ ã€npm s/search å…³é”®å­—ã€

2. `ç½‘ç«™æœç´¢` ç½‘å€æ˜¯ [https://www.npmjs.com/](https://www.npmjs.com/)

> ç»å¸¸æœ‰åŒå­¦é—®ï¼Œã€æˆ‘æ€æ ·æ‰èƒ½ç²¾å‡†æ‰¾åˆ°æˆ‘éœ€è¦çš„åŒ…ï¼Ÿã€
>
> è¿™ä¸ªäº‹å„¿éœ€è¦å¤§å®¶åœ¨å®è·µä¸­ä¸æ–­çš„ç§¯ç´¯ï¼Œé€šè¿‡çœ‹æ–‡ç« ï¼Œçœ‹é¡¹ç›®å»å­¦ä¹ å»ç§¯ç´¯

#### ä¸‹è½½å®‰è£…åŒ…

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `npm install` å’Œ `npm i` å‘½ä»¤å®‰è£…åŒ…

```js
# æ ¼å¼
npm install <åŒ…å>
npm i <åŒ…å>
    
# ç¤ºä¾‹
npm install uniq
npm i uniq
```

è¿è¡Œä¹‹åæ–‡ä»¶å¤¹ä¸‹ä¼šå¢åŠ ä¸¤ä¸ªèµ„æº

- `node_modules` æ–‡ä»¶å¤¹ å­˜æ”¾ä¸‹è½½çš„åŒ…
- `package-lock.json` åŒ…çš„é”æ–‡ä»¶ï¼Œç”¨æ¥é”å®šåŒ…çš„ç‰ˆæœ¬

>å®‰è£… `uniq` ä¹‹åï¼Œ `uniq` å°±æ˜¯å½“å‰è¿™ä¸ªåŒ…çš„ä¸€ä¸ª `ä¾èµ–åŒ…` ï¼Œæœ‰æ—¶ä¼šç®€ç§°ä¸º `ä¾èµ–`
>
>æ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…åå­—ä¸º `A`ï¼Œ`A` ä¸­å®‰è£…äº†åŒ…åå­—æ˜¯ `B`ï¼Œæˆ‘ä»¬å°±è¯´ `B` æ˜¯ `A` çš„ä¸€ä¸ªä¾èµ–åŒ…ï¼Œä¹Ÿä¼šè¯´`A` ä¾èµ– `B`

#### require å¯¼å…¥ npm åŒ…åŸºæœ¬æµç¨‹

1. åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ `node_modules` ä¸­å¯»æ‰¾åŒåçš„æ–‡ä»¶å¤¹
2. åœ¨ä¸Šçº§ç›®å½•ä¸­ä¸‹çš„ `node_modules` ä¸­å¯»æ‰¾åŒåçš„æ–‡ä»¶å¤¹ï¼Œç›´è‡³æ‰¾åˆ°ç£ç›˜æ ¹ç›®å½•

### ç”Ÿäº§ç¯å¢ƒä¸å¼€å‘ç¯å¢ƒ

å¼€å‘ç¯å¢ƒæ˜¯ç¨‹åºå‘˜ `ä¸“é—¨ç”¨æ¥å†™ä»£ç ` çš„ç¯å¢ƒï¼Œä¸€èˆ¬æ˜¯æŒ‡ç¨‹åºå‘˜çš„ç”µè„‘ï¼Œå¼€å‘ç¯å¢ƒçš„é¡¹ç›®ä¸€èˆ¬ `åªèƒ½ç¨‹åºå‘˜è‡ªå·±è®¿é—®`

ç”Ÿäº§ç¯å¢ƒæ˜¯é¡¹ç›® `ä»£ç æ­£å¼è¿è¡Œ` çš„ç¯å¢ƒï¼Œä¸€èˆ¬æ˜¯æŒ‡æ­£å¼çš„æœåŠ¡å™¨ç”µè„‘ï¼Œç”Ÿäº§ç¯å¢ƒçš„é¡¹ç›®ä¸€èˆ¬ `æ¯ä¸ªå®¢æˆ·éƒ½å¯ä»¥è®¿é—®`

### ç”Ÿäº§ä¾èµ–ä¸å¼€å‘ä¾èµ–

æˆ‘ä»¬å¯ä»¥åœ¨å®‰è£…æ—¶è®¾ç½®é€‰é¡¹æ¥åŒºåˆ† ä¾èµ–çš„ç±»å‹ï¼Œç›®å‰åˆ†ä¸ºä¸¤ç±»ï¼š

| ç±»å‹     | å‘½ä»¤                                    | è¡¥å……                                                                                     |
| -------- | --------------------------------------- | ---------------------------------------------------------------------------------------- |
| ç”Ÿäº§ä¾èµ– | npm i -S uniq<br/>npm i --save uniq     | -S ç­‰æ•ˆäº --saveï¼Œ  `-S æ˜¯é»˜è®¤é€‰é¡¹`<br/>åŒ…ä¿¡æ¯ä¿å­˜åœ¨ package.json ä¸­ `dependencies` å±æ€§ |
| å¼€å‘ä¾èµ– | npm i -D less<br/>npm i --save-dev less | -D ç­‰æ•ˆäº --save-dev<br/>åŒ…ä¿¡æ¯ä¿å­˜åœ¨ package.json ä¸­ `dependencies` å±æ€§                |

> ä¸¾ä¸ªä¾‹å­æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œæ¯”å¦‚è¯´åšè›‹ç‚’é¥­éœ€è¦ `å¤§ç±³ ï¼Œ æ²¹ ï¼Œ è‘± ï¼Œ é¸¡è›‹ ï¼Œ é”… ï¼Œ ç…¤æ°” ï¼Œ é“²å­` ç­‰
>
> å…¶ä¸­ `é”… ï¼Œ ç…¤æ°” ï¼Œ é“²å­` å±äºå¼€å‘ä¾èµ–ï¼Œåªåœ¨åˆ¶ä½œé˜¶æ®µä½¿ç”¨
>
> è€Œ` å¤§ç±³ ï¼Œ æ²¹ ï¼Œ è‘± ï¼Œ é¸¡è›‹` å±äºç”Ÿäº§ä¾èµ–ï¼Œåœ¨åˆ¶ä½œä¸æœ€ç»ˆé£Ÿç”¨éƒ½ä¼šç”¨åˆ°
>
> æ‰€ä»¥ `å¼€å‘ä¾èµ–` æ˜¯åªåœ¨å¼€å‘é˜¶æ®µä½¿ç”¨çš„ä¾èµ–åŒ…ï¼Œè€Œ `ç”Ÿäº§ä¾èµ–` æ˜¯å¼€å‘é˜¶æ®µå’Œæœ€ç»ˆä¸Šçº¿è¿è¡Œé˜¶æ®µéƒ½ç”¨åˆ°çš„ä¾èµ–åŒ…

### å…¨å±€å®‰è£…

æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå®‰è£…é€‰é¡¹ `-g` è¿›è¡Œå…¨å±€å®‰è£…

```js
npm i -g nodemon
```

å…¨å±€å®‰è£…å®Œæˆä¹‹åå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œçš„ä»»ä½•ä½ç½®è¿è¡Œ `nodemon` å‘½ä»¤

è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯ `è‡ªåŠ¨é‡å¯ node åº”ç”¨ç¨‹åº`

> è¯´æ˜ï¼š
>
> - å…¨å±€å®‰è£…çš„å‘½ä»¤ä¸å—å·¥ä½œç›®å½•ä½ç½®å½±å“
> - å¯ä»¥é€šè¿‡ `npm root -g` å¯ä»¥æŸ¥çœ‹å…¨å±€å®‰è£…åŒ…çš„ä½ç½®
> - `ä¸æ˜¯æ‰€æœ‰çš„åŒ…éƒ½é€‚åˆå…¨å±€å®‰è£…` ï¼Œåªæœ‰å…¨å±€ç±»çš„å·¥å…·æ‰é€‚åˆï¼Œå¯ä»¥é€šè¿‡ `æŸ¥çœ‹åŒ…çš„å®˜æ–¹æ–‡æ¡£æ¥ç¡®å®šå®‰è£…æ–¹å¼` ï¼Œè¿™é‡Œå…ˆä¸å¿…å¤ªçº ç»“

#### ä¿®æ”¹ windows æ‰§è¡Œç­–ç•¥

![image-20230418215723985](./assets/image-20230418215723985.png)

windows é»˜è®¤ä¸å…è®¸ npm å…¨å±€å‘½ä»¤æ‰§è¡Œè„šæœ¬æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹æ‰§è¡Œç­–ç•¥

1. ä»¥ `ç®¡ç†å‘˜èº«ä»½` æ‰“å¼€ powershell å‘½ä»¤è¡Œ

   ![image-20230418215726822](./assets/image-20230418215726822.png)

2. é”®å…¥å‘½ä»¤ `set-ExecutionPolicy remoteSigned`

   ![image-20230418215729558](./assets/image-20230418215729558.png)

3. é”®å…¥ `A` ç„¶åæ•²å›è½¦ ğŸ‘Œ

4. å¦‚æœä¸ç”Ÿæ•ˆï¼Œå¯ä»¥å°è¯•é‡å¯ `vscode`

#### ç¯å¢ƒå˜é‡ Path

Path æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå¯ä»¥è®¾ç½®ä¸€äº›æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œåœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æ‰¾ä¸åˆ°å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå°±ä¼šåœ¨ç¯å¢ƒå˜é‡ Path çš„ç›®å½•ä¸­æŒ¨ä¸ªçš„æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°åˆ™æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±ä¼šæŠ¥é”™

![image-20230418215732997](./assets/image-20230418215732997.png)

> è¡¥å……è¯´æ˜ï¼š
>
> - å¦‚æœå¸Œæœ›æŸä¸ªç¨‹åºåœ¨ä»»ä½•å·¥ä½œç›®å½•ä¸‹éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œå°±åº”è¯¥å°†è¯¥ç¨‹åºçš„æ‰€åœ¨ç›®å½•é…ç½®åˆ°ç¯å¢ƒå˜é‡ Path ä¸­
> - windows ä¸‹æŸ¥æ‰¾å‘½ä»¤çš„æ‰€åœ¨ä½ç½®
>   - cmd å‘½ä»¤è¡Œ ä¸­æ‰§è¡Œ where nodemon
>   - powershell å‘½ä»¤è¡Œ æ‰§è¡Œ get-command nodemon

### å®‰è£…åŒ…ä¾èµ–

åœ¨é¡¹ç›®åä½œä¸­æœ‰ä¸€ä¸ªå¸¸ç”¨çš„å‘½ä»¤å°±æ˜¯ `npm i` ï¼Œé€šè¿‡è¯¥å‘½ä»¤å¯ä»¥ä¾æ® `package.json` å’Œ `package-lock.json` çš„ä¾èµ–å£°æ˜å®‰è£…é¡¹ç›®ä¾èµ–

```js
npm i
npm install
```

> `node_modules` æ–‡ä»¶å¤¹å¤§å¤šæ•°æƒ…å†µéƒ½ä¸ä¼šå­˜å…¥ç‰ˆæœ¬åº“

### å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…

é¡¹ç›®ä¸­å¯èƒ½ä¼šé‡åˆ°ç‰ˆæœ¬ä¸åŒ¹é…çš„æƒ…å†µï¼Œæœ‰æ—¶å°±éœ€è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤çš„

```js
## æ ¼å¼
npm i <åŒ…å@ç‰ˆæœ¬å·>
    
## ç¤ºä¾‹
npm i jquery@1.11.2
```

### åˆ é™¤ä¾èµ–

é¡¹ç›®ä¸­å¯èƒ½éœ€è¦åˆ é™¤æŸäº›ä¸éœ€è¦çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤

```js
## å±€éƒ¨åˆ é™¤
npm remove uniq
npm r uniq

## å…¨å±€åˆ é™¤
npm remove -g nodemon
```

### é…ç½®å‘½ä»¤åˆ«å

é€šè¿‡é…ç½®å‘½ä»¤åˆ«åå¯ä»¥æ›´ç®€å•çš„æ‰§è¡Œå‘½ä»¤

é…ç½® `package.json` ä¸­çš„ `scripts` å±æ€§

```json
{
	...
    "scripts": {
        "server": "node server.js",
        "start": "node index.js",
    },
	...
}
```

é…ç½®å®Œæˆä¹‹åï¼Œå¯ä»¥ä½¿ç”¨åˆ«åæ‰§è¡Œå‘½ä»¤

```js
npm run server
npm run start
```

ä¸è¿‡ `start` åˆ«åæ¯”è¾ƒç‰¹åˆ«ï¼Œä½¿ç”¨æ—¶å¯ä»¥çœç•¥ `run`

```js
npm start
```

> è¡¥å……è¯´æ˜ï¼š
>
> - `npm start` æ˜¯é¡¹ç›®ä¸­å¸¸ç”¨çš„ä¸€ä¸ªå‘½ä»¤ï¼Œä¸€èˆ¬ç”¨æ¥å¯åŠ¨é¡¹ç›®
> - `npm run` æœ‰è‡ªåŠ¨å‘ä¸Šçº§ç›®å½•æŸ¥æ‰¾çš„ç‰¹æ€§ï¼Œè·Ÿ `require` å‡½æ•°ä¹Ÿä¸€æ ·
> - å¯¹äºé™Œç”Ÿçš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹ `scripts` å±æ€§æ¥å‚è€ƒé¡¹ç›®çš„ä¸€äº›æ“ä½œ

## cnpm

### ä»‹ç»

`cnpm` æ˜¯ä¸€ä¸ªæ·˜å®æ„å»ºçš„ `npmjs.com` çš„å®Œæ•´é•œåƒï¼Œä¹Ÿç§°ä¸ºã€æ·˜å®é•œåƒã€ï¼Œç½‘å€ [https://npmmirror.com/](https://npmmirror.com/)

`cnpm` æœåŠ¡éƒ¨ç½²åœ¨å›½å†… `é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Š` ï¼Œå¯ä»¥æé«˜åŒ…çš„ä¸‹è½½é€Ÿåº¦

å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€ä¸ªå…¨å±€å·¥å…·åŒ… `cnpm` ï¼Œæ“ä½œå‘½ä»¤ä¸ `npm` å¤§ä½“ç›¸åŒ

### å®‰è£…

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `npm` æ¥å®‰è£… `cnpm` å·¥å…·

```js
npm install -g cnpm --registry=https://registry.npmmirror.com
```

| åŠŸèƒ½         | å‘½ä»¤                                                                    |
| ------------ | ----------------------------------------------------------------------- |
| åˆå§‹åŒ–       | cnpm init<br/>cnpm init                                                 |
| å®‰è£…åŒ…       | cnpm i uniq<br/>cnpm i -S uniq<br/>cnpm i -D uniq<br/>cnpm i -g nodemon |
| å®‰è£…é¡¹ç›®ä¾èµ– | cnpm i                                                                  |
| åˆ é™¤         | cnpm r uniq                                                             |

### npm é…ç½®æ·˜å®é•œåƒ

ç”¨ `npm` ä¹Ÿå¯ä»¥ä½¿ç”¨æ·˜å®é•œåƒï¼Œé…ç½®çš„æ–¹å¼æœ‰ä¸¤ç§

- ç›´æ¥é…ç½®
- å·¥å…·é…ç½®

#### ç›´æ¥é…ç½®

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯å®Œæˆé…ç½®

```js
npm config set registry https://registry.npmmirror.com/
```

#### å·¥å…·é…ç½®

ä½¿ç”¨ `nrm` é…ç½® `npm` çš„é•œåƒåœ°å€ `npm registry manager`

1. å®‰è£… nrm

   ```js
   npm i -g nrm
   ```

2. ä¿®æ”¹é•œåƒ

   ```js
   nrm use taobao
   ```

3. æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸï¼ˆé€‰åšï¼‰

   ```js
   npm config list
   ```

æ£€æŸ¥ registry åœ°å€æ˜¯å¦ä¸º [https://registry.npmmirror.com/](https://registry.npmmirror.com/) , å¦‚æœæ˜¯åˆ™è¡¨æ˜æˆåŠŸ

> è¡¥å……è¯´æ˜ï¼š
>
> 1. `å»ºè®®ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼` è¿›è¡Œé•œåƒé…ç½®ï¼Œå› ä¸ºåç»­ä¿®æ”¹èµ·æ¥ä¼šæ¯”è¾ƒæ–¹ä¾¿
> 2. è™½ç„¶ `cnpm` å¯ä»¥æé«˜é€Ÿåº¦ï¼Œä½†æ˜¯ `npm` ä¹Ÿå¯ä»¥é€šè¿‡æ·˜å®é•œåƒè¿›è¡ŒåŠ é€Ÿï¼Œæ‰€ä»¥ npm çš„ä½¿ç”¨ç‡è¿˜æ˜¯é«˜äº cnpm

## yarn

![image-20230418215738741](./assets/image-20230418215738741.png)

### yarn ä»‹ç»

yarn æ˜¯ç”± Facebook åœ¨ 2016 å¹´æ¨å‡ºçš„æ–°çš„ Javascript åŒ…ç®¡ç†å·¥å…·ï¼Œå®˜æ–¹ç½‘å€ï¼š[https://yarnpkg.com/](https://yarnpkg.com/)

### yarn ç‰¹ç‚¹

yarn å®˜æ–¹å®£ç§°çš„ä¸€äº›ç‰¹ç‚¹

- é€Ÿåº¦è¶…å¿«ï¼šyarn ç¼“å­˜äº†æ¯ä¸ªä¸‹è½½è¿‡çš„åŒ…ï¼Œæ‰€ä»¥å†æ¬¡ä½¿ç”¨æ—¶æ— éœ€é‡å¤ä¸‹è½½ã€‚åŒæ—¶åˆ©ç”¨å¹¶è¡Œä¸‹è½½ä»¥æœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œå› æ­¤å®‰è£…é€Ÿåº¦æ›´å¿«
- è¶…çº§å®‰å…¨ï¼šåœ¨æ‰§è¡Œä»£ç ä¹‹å‰ï¼Œyarn ä¼šé€šè¿‡ç®—æ³•æ ¡éªŒæ¯ä¸ªå®‰è£…åŒ…çš„å®Œæ•´æ€§
- è¶…çº§å¯é ï¼šä½¿ç”¨è¯¦ç»†ã€ç®€æ´çš„é”æ–‡ä»¶æ ¼å¼å’Œæ˜ç¡®çš„å®‰è£…ç®—æ³•ï¼Œyarn èƒ½å¤Ÿä¿è¯åœ¨ä¸åŒç³»ç»Ÿä¸Šæ— å·®å¼‚çš„å·¥ä½œ

### yarn å®‰è£…

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ npm å®‰è£… yarn

```js
npm i -g yarn
```

### yarn å¸¸ç”¨å‘½ä»¤

| åŠŸèƒ½         | å‘½ä»¤                                                                                         |
| ------------ | -------------------------------------------------------------------------------------------- |
| åˆå§‹åŒ–       | yarn init<br/>yarn init -y                                                                   |
| å®‰è£…åŒ…       | yarn add uniq ç”Ÿäº§ä¾èµ–<br/>yarn add less --dev å¼€å‘ä¾èµ–<br/>yarn global add nodemon å…¨å±€å®‰è£… |
| åˆ é™¤åŒ…       | yarn remove uniq åˆ é™¤é¡¹ç›®ä¾èµ–åŒ…<br/>yarn global remove nodemon å…¨å±€åˆ é™¤åŒ…                    |
| å®‰è£…é¡¹ç›®ä¾èµ– | yarn                                                                                         |
| è¿è¡Œå‘½ä»¤åˆ«å | yarn <åˆ«å><br/># ä¸éœ€è¦æ·»åŠ   run                                                            |

> æ€è€ƒé¢˜ï¼š
>
> è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜å°±æ˜¯ `å…¨å±€å®‰è£…çš„åŒ…ä¸å¯ç”¨` ï¼Œyarn å…¨å±€å®‰è£…åŒ…çš„ä½ç½®å¯ä»¥é€šè¿‡`yarn global bin` æ¥æŸ¥çœ‹

### yarn é…ç½®æ·˜å®é•œåƒ

å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤é…ç½®æ·˜å®é•œåƒ

```js
yarn config set registry https://registry.npmmirror.com
```

å¯ä»¥é€šè¿‡ `yarn config list` æŸ¥çœ‹ `yarn` çš„é…ç½®é¡¹

### npm å’Œ yarn é€‰æ‹©

å¤§å®¶å¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯è¿›è¡Œé€‰æ‹©

1. ä¸ªäººé¡¹ç›®

   å¦‚æœæ˜¯ä¸ªäººé¡¹ç›®ï¼Œå“ªä¸ªå·¥å…·éƒ½å¯ä»¥ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥é€‰æ‹©

2. å…¬å¸é¡¹ç›®

   å¦‚æœæ˜¯å…¬å¸è¦æ ¹æ®é¡¹ç›®ä»£ç æ¥é€‰æ‹©ï¼Œå¯ä»¥ `é€šè¿‡é”æ–‡ä»¶åˆ¤æ–­` é¡¹ç›®çš„åŒ…ç®¡ç†å·¥å…·

   - `npm` çš„é”æ–‡ä»¶ä¸º `package-lock.json`
   - `yarn` çš„é”æ–‡ä»¶ä¸º `yarn.lock`

> åŒ…ç®¡ç†å·¥å…· `ä¸è¦æ··ç€ç”¨ï¼Œåˆ‡è®°ï¼Œåˆ‡è®°ï¼Œåˆ‡è®°`

## ç®¡ç†å‘å¸ƒåŒ…

### åˆ›å»ºä¸å‘å¸ƒ

æˆ‘ä»¬å¯ä»¥å°†è‡ªå·±å¼€å‘çš„å·¥å…·åŒ…å‘å¸ƒåˆ° `npm` æœåŠ¡ä¸Šï¼Œæ–¹ä¾¿è‡ªå·±å’Œå…¶ä»–å¼€å‘è€…ä½¿ç”¨ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š

1. åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶ `index.js`ï¼Œåœ¨æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°ï¼Œä½¿ç”¨ `module.exports` æš´éœ²
2. `npm` åˆå§‹åŒ–å·¥å…·åŒ…ï¼Œ`package.json` å¡«å†™åŒ…çš„ä¿¡æ¯ (åŒ…çš„åå­—æ˜¯å”¯ä¸€çš„)
3. æ³¨å†Œè´¦å· [https://www.npmjs.com/signup](https://www.npmjs.com/signup)
4. æ¿€æ´»è´¦å·ï¼ˆä¸€å®šè¦æ¿€æ´»è´¦å·ï¼‰
5. ä¿®æ”¹ä¸ºå®˜æ–¹çš„å®˜æ–¹é•œåƒ (å‘½ä»¤è¡Œä¸­è¿è¡Œ `nrm use npm` )
6. å‘½ä»¤è¡Œä¸‹ `npm login` å¡«å†™ç›¸å…³ç”¨æˆ·ä¿¡æ¯
7. å‘½ä»¤è¡Œä¸‹ `npm publish` æäº¤åŒ… ğŸ‘Œ

### æ›´æ–°åŒ…

åç»­å¯ä»¥å¯¹è‡ªå·±å‘å¸ƒçš„åŒ…è¿›è¡Œæ›´æ–°ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹

1. æ›´æ–°åŒ…ä¸­çš„ä»£ç 

2. æµ‹è¯•ä»£ç æ˜¯å¦å¯ç”¨

3. ä¿®æ”¹ `package.json` ä¸­çš„ç‰ˆæœ¬å·

4. å‘å¸ƒæ›´æ–°

   ```js
   npm publish
   ```

### åˆ é™¤åŒ…

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ é™¤åŒ…

```js
npm unpublish --force
```

> åˆ é™¤åŒ…éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œ[https://docs.npmjs.com/policies/unpublish](https://docs.npmjs.com/policies/unpublish)
>
> - ä½ æ˜¯åŒ…çš„ä½œè€…
> - å‘å¸ƒå°äº 24 å°æ—¶
> - å¤§äº 24 å°æ—¶åï¼Œæ²¡æœ‰å…¶ä»–åŒ…ä¾èµ–ï¼Œå¹¶ä¸”æ¯å‘¨å°äº 300 ä¸‹è½½é‡ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªç»´æŠ¤è€…

## æ‰©å±•å†…å®¹

åœ¨å¾ˆå¤šè¯­è¨€ä¸­éƒ½æœ‰åŒ…ç®¡ç†å·¥å…·ï¼Œæ¯”å¦‚ï¼š

| è¯­è¨€       | åŒ…ç®¡ç†å·¥å…·          |
| ---------- | ------------------- |
| PHP        | composer            |
| Python     | pip                 |
| Java       | maven               |
| Go         | go mod              |
| JavaScript | npm/yarn/cnpm/other |
| Ruby       | rubyGems            |

é™¤äº†ç¼–ç¨‹è¯­è¨€é¢†åŸŸæœ‰åŒ…ç®¡ç†å·¥å…·ä¹‹å¤–ï¼Œæ“ä½œç³»ç»Ÿå±‚é¢ä¹Ÿå­˜åœ¨åŒ…ç®¡ç†å·¥å…·ï¼Œä¸è¿‡è¿™ä¸ªåŒ…æŒ‡çš„æ˜¯ã€ è½¯ä»¶åŒ… ã€

| æ“ä½œç³»ç»Ÿ | åŒ…ç®¡ç†å·¥å…· | ç½‘å€                                                                       |
| -------- | ---------- | -------------------------------------------------------------------------- |
| Centos   | yum        | [https://packages.debian.org/stable/](https://packages.debian.org/stable/) |
| Ubuntu   | apt        | [https://packages.ubuntu.com/](https://packages.ubuntu.com/)               |
| MacOS    | homebrew   | [https://brew.sh/](https://brew.sh/)                                       |
| Windows  | chocolatey | [https://chocolatey.org/](https://chocolatey.org/)                         |
